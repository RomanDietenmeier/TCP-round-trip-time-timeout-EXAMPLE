/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/constants.ts":
/*!**************************!*\
  !*** ./src/constants.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "initialRTTPoints": () => (/* binding */ initialRTTPoints)
/* harmony export */ });
var initialRTTPoints = [
    214.93366724112192, 228.0693006177108, 194.63023377156003, 191.3277541941572,
    170.38355957908368, 219.97537576960735, 190.153684877579, 211.86321565068653,
    170.7521759235892, 250.54684515378972, 225.51591362082897, 173.2700071315282,
    213.88239576969826, 242.62225008037697, 177.2942210588158, 215.4961204502749,
    219.4681944826237, 210.630333226394, 222.89031229904742, 218.70912845956485,
];


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ "./src/constants.ts");

var minRTTinput = document.getElementById("minRTTinput");
var maxRTTinput = document.getElementById("maxRTTinput");
var baselineInput = document.getElementById("baselineInput");
var pointsInput = document.getElementById("pointsInput");
var deviationInput = document.getElementById("deviationInput");
var alphaERTTInput = document.getElementById("alphaInput");
var betaDevRTTInput = document.getElementById("betaInput");
var randomGenerationButton = document.getElementById("rdmGenButton");
var showERTTCheckbox = document.getElementById("erttCheckbox");
var showDevRTTCheckbox = document.getElementById("devrttCheckbox");
var showTimeoutCheckbox = document.getElementById("timeoutCheckbox");
var canvas = document.getElementById("canvas");
var canvasContext = canvas.getContext("2d");
function clearCanvas() {
    canvasContext.clearRect(0, 0, canvas.width, canvas.height);
}
function diagram() {
    var state = {
        initialState: function () { },
        randomGeneration: function () { },
        calcTimeoutInterval: function () { },
        draw: function () { },
        rttPoints: [],
        erttPoints: [],
        devRTTPoints: [],
        timeoutIntervalPoints: [],
    };
    function drawRTTDeviation() {
        var minRTT = parseInt(minRTTinput.value);
        var maxRTT = parseInt(maxRTTinput.value);
        canvasContext.strokeStyle = "#0008";
        canvasContext.lineWidth = 7;
        canvasContext.beginPath();
        for (var i = 0; i < state.rttPoints.length; i++) {
            var canvasX = canvas.width * (i / state.rttPoints.length);
            var canvasY = canvas.height -
                canvas.height * ((state.rttPoints[i] - minRTT) / (maxRTT - minRTT));
            var yDeviation = canvasY * (state.devRTTPoints[i] / (maxRTT - minRTT));
            canvasContext.moveTo(canvasX, canvasY + yDeviation);
            canvasContext.lineTo(canvasX, canvasY - yDeviation);
        }
        canvasContext.stroke();
    }
    function drawPoints(points, color) {
        var minRTT = parseInt(minRTTinput.value);
        var maxRTT = parseInt(maxRTTinput.value);
        canvasContext.fillStyle = color;
        canvasContext.strokeStyle = color;
        canvasContext.lineWidth = 2;
        canvasContext.beginPath();
        var previousCanvasX = 0;
        var previousCanvasY = 0;
        for (var i = 0; i < points.length; i++) {
            var canvasX = canvas.width * (i / points.length);
            var canvasY = canvas.height -
                canvas.height * ((points[i] - minRTT) / (maxRTT - minRTT));
            canvasContext.fillRect(canvasX - 3, canvasY - 3, 7, 7);
            if (i > 0) {
                canvasContext.moveTo(previousCanvasX, previousCanvasY);
                canvasContext.lineTo(canvasX, canvasY);
            }
            previousCanvasX = canvasX;
            previousCanvasY = canvasY;
        }
        canvasContext.stroke();
    }
    function initialState() {
        showERTTCheckbox.checked = true;
        showDevRTTCheckbox.checked = true;
        showTimeoutCheckbox.checked = true;
        clearCanvas();
        minRTTinput.value = "100";
        maxRTTinput.value = "350";
        baselineInput.value = "200";
        pointsInput.value = "20";
        deviationInput.value = "35";
        alphaERTTInput.value = "12.5";
        betaDevRTTInput.value = "25";
        state.rttPoints = _constants__WEBPACK_IMPORTED_MODULE_0__.initialRTTPoints;
        state.erttPoints = [];
        state.devRTTPoints = [];
        state.timeoutIntervalPoints = [];
        state.calcTimeoutInterval();
    }
    function draw() {
        clearCanvas();
        var drawERTT = showERTTCheckbox.checked;
        var drawDevRTT = showDevRTTCheckbox.checked;
        var drawTimeout = showTimeoutCheckbox.checked;
        var minRTT = parseInt(minRTTinput.value);
        var maxRTT = parseInt(maxRTTinput.value);
        canvasContext.strokeStyle = "#808080";
        canvasContext.fillStyle = "#000";
        canvasContext.lineWidth = 2;
        canvasContext.font = "1rem Consolas";
        canvasContext.beginPath();
        canvasContext.moveTo(0, 0);
        canvasContext.lineTo(0, canvas.height);
        for (var i = 0; i <= maxRTT - minRTT; i += 50) {
            var value = canvas.height - (i / (maxRTT - minRTT)) * canvas.height;
            canvasContext.moveTo(0, value);
            canvasContext.lineTo(canvas.width, value);
            canvasContext.fillText("".concat(minRTT + i), 0, value - 2);
        }
        var count = 1;
        var previousI = 0;
        for (var i = 0; i <= canvas.width; i += canvas.width / state.rttPoints.length) {
            if (i - previousI > 40) {
                canvasContext.moveTo(i, canvas.height);
                canvasContext.lineTo(i, canvas.height - 10);
                canvasContext.fillText("".concat(count), i, canvas.height - 2);
                previousI = i;
            }
            count++;
        }
        canvasContext.stroke();
        drawPoints(state.rttPoints, "#00f");
        if (drawERTT)
            drawPoints(state.erttPoints, "magenta");
        if (drawDevRTT)
            drawRTTDeviation();
        if (drawTimeout)
            drawPoints(state.timeoutIntervalPoints, "red");
    }
    function randomGeneration() {
        var baseline = parseInt(baselineInput.value);
        var minRTT = parseInt(minRTTinput.value);
        var maxRTT = parseInt(maxRTTinput.value);
        var deviationPercentage = parseInt(deviationInput.value) / 100;
        var baselineAddLimit = maxRTT - baseline;
        var baselineSubLimit = baseline - minRTT;
        var pointCount = parseInt(pointsInput.value);
        state.rttPoints = [];
        for (var i = 0; i < pointCount; i++) {
            var percentage = Math.random();
            var value = baseline;
            if (Math.random() >= 0.5) {
                //Add
                value += percentage * baselineAddLimit * deviationPercentage;
            }
            else {
                //Subtract
                value -= percentage * baselineSubLimit * deviationPercentage;
            }
            state.rttPoints.push(value);
        }
        calcTimeoutInterval();
        draw();
    }
    function calcTimeoutInterval() {
        var alphaERTT = parseInt(alphaERTTInput.value) / 100;
        var betaDevRTT = parseInt(betaDevRTTInput.value) / 100;
        state.erttPoints = [];
        state.devRTTPoints = [];
        state.timeoutIntervalPoints = [];
        for (var i = 0; i < state.rttPoints.length; i++) {
            if (i <= 0) {
                state.erttPoints.push(state.rttPoints[i]);
                state.devRTTPoints.push(Math.abs(state.rttPoints[i] - state.erttPoints[i]));
            }
            else {
                state.erttPoints.push((1 - alphaERTT) * state.erttPoints[i - 1] +
                    alphaERTT * state.rttPoints[i]);
                state.devRTTPoints.push((1 - betaDevRTT) * state.devRTTPoints[i - 1] +
                    betaDevRTT * Math.abs(state.rttPoints[i] - state.erttPoints[i]));
            }
            state.timeoutIntervalPoints.push(state.erttPoints[i] + 4 * state.devRTTPoints[i]);
        }
    }
    state.initialState = initialState;
    state.draw = draw;
    state.randomGeneration = randomGeneration;
    state.calcTimeoutInterval = calcTimeoutInterval;
    state.initialState();
    return state;
}
var rttDiagram = diagram();
rttDiagram.draw();
randomGenerationButton.onclick = rttDiagram.randomGeneration;
showERTTCheckbox.onchange = function () {
    rttDiagram.draw();
};
showDevRTTCheckbox.onchange = function () {
    rttDiagram.draw();
};
showTimeoutCheckbox.onchange = function () {
    rttDiagram.draw();
};
minRTTinput.onchange = function () {
    var value = parseInt(minRTTinput.value);
    if (value < 0) {
        minRTTinput.value = "0";
    }
    var maxValue = parseInt(maxRTTinput.value);
    if (value > maxValue) {
        minRTTinput.value = maxRTTinput.value;
    }
    if (parseInt(baselineInput.value) < value) {
        baselineInput.value = minRTTinput.value;
    }
};
maxRTTinput.onchange = function () {
    var value = parseInt(maxRTTinput.value);
    if (value < 0) {
        maxRTTinput.value = "0";
    }
    var minValue = parseInt(minRTTinput.value);
    if (value < minValue) {
        maxRTTinput.value = minRTTinput.value;
    }
    if (parseInt(baselineInput.value) > value) {
        baselineInput.value = maxRTTinput.value;
    }
};
baselineInput.onchange = function () {
    var value = parseInt(baselineInput.value);
    if (value < parseInt(minRTTinput.value)) {
        baselineInput.value = minRTTinput.value;
    }
    if (value > parseInt(maxRTTinput.value)) {
        baselineInput.value = maxRTTinput.value;
    }
};
function setRemRootOnResize() {
    var pixelAmount = document.body.clientWidth / 65;
    document.documentElement.style.fontSize = "".concat(pixelAmount, "px");
}
setRemRootOnResize();
window.onresize = setRemRootOnResize;

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxDQUFDO0tBQ3pCO0lBQ0QsSUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QyxJQUFJLEtBQUssR0FBRyxRQUFRLEVBQUU7UUFDcEIsV0FBVyxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDO0tBQ3ZDO0lBQ0QsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssRUFBRTtRQUN6QyxhQUFhLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUM7S0FDekM7QUFDSCxDQUFDLENBQUM7QUFDRixhQUFhLENBQUMsUUFBUSxHQUFHO0lBQ3ZCLElBQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUMsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUN2QyxhQUFhLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUM7S0FDekM7SUFDRCxJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3ZDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQztLQUN6QztBQUNILENBQUMsQ0FBQztBQUVGLFNBQVMsa0JBQWtCO0lBQ3pCLElBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUNuRCxRQUFRLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBRyxXQUFXLE9BQUksQ0FBQztBQUMvRCxDQUFDO0FBQ0Qsa0JBQWtCLEVBQUUsQ0FBQztBQUNyQixNQUFNLENBQUMsUUFBUSxHQUFHLGtCQUFrQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGNwLXJvdW50LXRyaXAtdGltZS10aW1lb3V0Ly4vc3JjL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly90Y3Atcm91bnQtdHJpcC10aW1lLXRpbWVvdXQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGNwLXJvdW50LXRyaXAtdGltZS10aW1lb3V0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90Y3Atcm91bnQtdHJpcC10aW1lLXRpbWVvdXQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90Y3Atcm91bnQtdHJpcC10aW1lLXRpbWVvdXQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90Y3Atcm91bnQtdHJpcC10aW1lLXRpbWVvdXQvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxSVFRQb2ludHMgPSBbXHJcbiAgMjE0LjkzMzY2NzI0MTEyMTkyLCAyMjguMDY5MzAwNjE3NzEwOCwgMTk0LjYzMDIzMzc3MTU2MDAzLCAxOTEuMzI3NzU0MTk0MTU3MixcclxuICAxNzAuMzgzNTU5NTc5MDgzNjgsIDIxOS45NzUzNzU3Njk2MDczNSwgMTkwLjE1MzY4NDg3NzU3OSwgMjExLjg2MzIxNTY1MDY4NjUzLFxyXG4gIDE3MC43NTIxNzU5MjM1ODkyLCAyNTAuNTQ2ODQ1MTUzNzg5NzIsIDIyNS41MTU5MTM2MjA4Mjg5NywgMTczLjI3MDAwNzEzMTUyODIsXHJcbiAgMjEzLjg4MjM5NTc2OTY5ODI2LCAyNDIuNjIyMjUwMDgwMzc2OTcsIDE3Ny4yOTQyMjEwNTg4MTU4LCAyMTUuNDk2MTIwNDUwMjc0OSxcclxuICAyMTkuNDY4MTk0NDgyNjIzNywgMjEwLjYzMDMzMzIyNjM5NCwgMjIyLjg5MDMxMjI5OTA0NzQyLCAyMTguNzA5MTI4NDU5NTY0ODUsXHJcbl07XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgaW5pdGlhbFJUVFBvaW50cyB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5cclxuY29uc3QgbWluUlRUaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1pblJUVGlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbmNvbnN0IG1heFJUVGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXhSVFRpbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5jb25zdCBiYXNlbGluZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJiYXNlbGluZUlucHV0XCJcclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5jb25zdCBwb2ludHNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRzSW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuY29uc3QgZGV2aWF0aW9uSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImRldmlhdGlvbklucHV0XCJcclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5jb25zdCBhbHBoYUVSVFRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwiYWxwaGFJbnB1dFwiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuY29uc3QgYmV0YURldlJUVElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJiZXRhSW5wdXRcIlxyXG4pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbmNvbnN0IHJhbmRvbUdlbmVyYXRpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcInJkbUdlbkJ1dHRvblwiXHJcbikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbmNvbnN0IHNob3dFUlRUQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICBcImVydHRDaGVja2JveFwiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuY29uc3Qgc2hvd0RldlJUVENoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgXCJkZXZydHRDaGVja2JveFwiXHJcbikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuY29uc3Qgc2hvd1RpbWVvdXRDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG4gIFwidGltZW91dENoZWNrYm94XCJcclxuKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuY29uc3QgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG5mdW5jdGlvbiBjbGVhckNhbnZhcygpIHtcclxuICBjYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaWFncmFtKCkge1xyXG4gIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgaW5pdGlhbFN0YXRlOiAoKSA9PiB7fSxcclxuICAgIHJhbmRvbUdlbmVyYXRpb246ICgpID0+IHt9LFxyXG4gICAgY2FsY1RpbWVvdXRJbnRlcnZhbDogKCkgPT4ge30sXHJcbiAgICBkcmF3OiAoKSA9PiB7fSxcclxuICAgIHJ0dFBvaW50czogW10gYXMgQXJyYXk8bnVtYmVyPixcclxuICAgIGVydHRQb2ludHM6IFtdIGFzIEFycmF5PG51bWJlcj4sXHJcbiAgICBkZXZSVFRQb2ludHM6IFtdIGFzIEFycmF5PG51bWJlcj4sXHJcbiAgICB0aW1lb3V0SW50ZXJ2YWxQb2ludHM6IFtdIGFzIEFycmF5PG51bWJlcj4sXHJcbiAgfTtcclxuICBmdW5jdGlvbiBkcmF3UlRURGV2aWF0aW9uKCkge1xyXG4gICAgY29uc3QgbWluUlRUID0gcGFyc2VJbnQobWluUlRUaW5wdXQudmFsdWUpO1xyXG4gICAgY29uc3QgbWF4UlRUID0gcGFyc2VJbnQobWF4UlRUaW5wdXQudmFsdWUpO1xyXG4gICAgY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9IFwiIzAwMDhcIjtcclxuICAgIGNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gNztcclxuICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnJ0dFBvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBjYW52YXNYID0gY2FudmFzLndpZHRoICogKGkgLyBzdGF0ZS5ydHRQb2ludHMubGVuZ3RoKTtcclxuICAgICAgY29uc3QgY2FudmFzWSA9XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCAtXHJcbiAgICAgICAgY2FudmFzLmhlaWdodCAqICgoc3RhdGUucnR0UG9pbnRzW2ldIC0gbWluUlRUKSAvIChtYXhSVFQgLSBtaW5SVFQpKTtcclxuICAgICAgY29uc3QgeURldmlhdGlvbiA9IGNhbnZhc1kgKiAoc3RhdGUuZGV2UlRUUG9pbnRzW2ldIC8gKG1heFJUVCAtIG1pblJUVCkpO1xyXG4gICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhjYW52YXNYLCBjYW52YXNZICsgeURldmlhdGlvbik7XHJcbiAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKGNhbnZhc1gsIGNhbnZhc1kgLSB5RGV2aWF0aW9uKTtcclxuICAgIH1cclxuICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkcmF3UG9pbnRzKHBvaW50czogQXJyYXk8bnVtYmVyPiwgY29sb3I6IHN0cmluZykge1xyXG4gICAgY29uc3QgbWluUlRUID0gcGFyc2VJbnQobWluUlRUaW5wdXQudmFsdWUpO1xyXG4gICAgY29uc3QgbWF4UlRUID0gcGFyc2VJbnQobWF4UlRUaW5wdXQudmFsdWUpO1xyXG4gICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgIGNhbnZhc0NvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgIGNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gMjtcclxuICAgIGNhbnZhc0NvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICBsZXQgcHJldmlvdXNDYW52YXNYID0gMDtcclxuICAgIGxldCBwcmV2aW91c0NhbnZhc1kgPSAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGNhbnZhc1ggPSBjYW52YXMud2lkdGggKiAoaSAvIHBvaW50cy5sZW5ndGgpO1xyXG4gICAgICBjb25zdCBjYW52YXNZID1cclxuICAgICAgICBjYW52YXMuaGVpZ2h0IC1cclxuICAgICAgICBjYW52YXMuaGVpZ2h0ICogKChwb2ludHNbaV0gLSBtaW5SVFQpIC8gKG1heFJUVCAtIG1pblJUVCkpO1xyXG4gICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KGNhbnZhc1ggLSAzLCBjYW52YXNZIC0gMywgNywgNyk7XHJcbiAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKHByZXZpb3VzQ2FudmFzWCwgcHJldmlvdXNDYW52YXNZKTtcclxuICAgICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhjYW52YXNYLCBjYW52YXNZKTtcclxuICAgICAgfVxyXG4gICAgICBwcmV2aW91c0NhbnZhc1ggPSBjYW52YXNYO1xyXG4gICAgICBwcmV2aW91c0NhbnZhc1kgPSBjYW52YXNZO1xyXG4gICAgfVxyXG4gICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXRpYWxTdGF0ZSgpIHtcclxuICAgIHNob3dFUlRUQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XHJcbiAgICBzaG93RGV2UlRUQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XHJcbiAgICBzaG93VGltZW91dENoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgY2xlYXJDYW52YXMoKTtcclxuICAgIG1pblJUVGlucHV0LnZhbHVlID0gXCIxMDBcIjtcclxuICAgIG1heFJUVGlucHV0LnZhbHVlID0gXCIzNTBcIjtcclxuICAgIGJhc2VsaW5lSW5wdXQudmFsdWUgPSBcIjIwMFwiO1xyXG4gICAgcG9pbnRzSW5wdXQudmFsdWUgPSBcIjIwXCI7XHJcbiAgICBkZXZpYXRpb25JbnB1dC52YWx1ZSA9IFwiMzVcIjtcclxuICAgIGFscGhhRVJUVElucHV0LnZhbHVlID0gXCIxMi41XCI7XHJcbiAgICBiZXRhRGV2UlRUSW5wdXQudmFsdWUgPSBcIjI1XCI7XHJcbiAgICBzdGF0ZS5ydHRQb2ludHMgPSBpbml0aWFsUlRUUG9pbnRzO1xyXG4gICAgc3RhdGUuZXJ0dFBvaW50cyA9IFtdO1xyXG4gICAgc3RhdGUuZGV2UlRUUG9pbnRzID0gW107XHJcbiAgICBzdGF0ZS50aW1lb3V0SW50ZXJ2YWxQb2ludHMgPSBbXTtcclxuICAgIHN0YXRlLmNhbGNUaW1lb3V0SW50ZXJ2YWwoKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZHJhdygpIHtcclxuICAgIGNsZWFyQ2FudmFzKCk7XHJcbiAgICBjb25zdCBkcmF3RVJUVCA9IHNob3dFUlRUQ2hlY2tib3guY2hlY2tlZDtcclxuICAgIGNvbnN0IGRyYXdEZXZSVFQgPSBzaG93RGV2UlRUQ2hlY2tib3guY2hlY2tlZDtcclxuICAgIGNvbnN0IGRyYXdUaW1lb3V0ID0gc2hvd1RpbWVvdXRDaGVja2JveC5jaGVja2VkO1xyXG5cclxuICAgIGNvbnN0IG1pblJUVCA9IHBhcnNlSW50KG1pblJUVGlucHV0LnZhbHVlKTtcclxuICAgIGNvbnN0IG1heFJUVCA9IHBhcnNlSW50KG1heFJUVGlucHV0LnZhbHVlKTtcclxuXHJcbiAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gXCIjODA4MDgwXCI7XHJcbiAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IFwiIzAwMFwiO1xyXG4gICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAyO1xyXG4gICAgY2FudmFzQ29udGV4dC5mb250ID0gXCIxcmVtIENvbnNvbGFzXCI7XHJcblxyXG4gICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKDAsIDApO1xyXG4gICAgY2FudmFzQ29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBtYXhSVFQgLSBtaW5SVFQ7IGkgKz0gNTApIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSBjYW52YXMuaGVpZ2h0IC0gKGkgLyAobWF4UlRUIC0gbWluUlRUKSkgKiBjYW52YXMuaGVpZ2h0O1xyXG5cclxuICAgICAgY2FudmFzQ29udGV4dC5tb3ZlVG8oMCwgdmFsdWUpO1xyXG4gICAgICBjYW52YXNDb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIHZhbHVlKTtcclxuICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dChgJHttaW5SVFQgKyBpfWAsIDAsIHZhbHVlIC0gMik7XHJcbiAgICB9XHJcbiAgICBsZXQgY291bnQgPSAxO1xyXG4gICAgbGV0IHByZXZpb3VzSSA9IDA7XHJcblxyXG4gICAgZm9yIChcclxuICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICBpIDw9IGNhbnZhcy53aWR0aDtcclxuICAgICAgaSArPSBjYW52YXMud2lkdGggLyBzdGF0ZS5ydHRQb2ludHMubGVuZ3RoXHJcbiAgICApIHtcclxuICAgICAgaWYgKGkgLSBwcmV2aW91c0kgPiA0MCkge1xyXG4gICAgICAgIGNhbnZhc0NvbnRleHQubW92ZVRvKGksIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKGksIGNhbnZhcy5oZWlnaHQgLSAxMCk7XHJcbiAgICAgICAgY2FudmFzQ29udGV4dC5maWxsVGV4dChgJHtjb3VudH1gLCBpLCBjYW52YXMuaGVpZ2h0IC0gMik7XHJcbiAgICAgICAgcHJldmlvdXNJID0gaTtcclxuICAgICAgfVxyXG4gICAgICBjb3VudCsrO1xyXG4gICAgfVxyXG4gICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTtcclxuICAgIGRyYXdQb2ludHMoc3RhdGUucnR0UG9pbnRzLCBcIiMwMGZcIik7XHJcblxyXG4gICAgaWYgKGRyYXdFUlRUKSBkcmF3UG9pbnRzKHN0YXRlLmVydHRQb2ludHMsIFwibWFnZW50YVwiKTtcclxuICAgIGlmIChkcmF3RGV2UlRUKSBkcmF3UlRURGV2aWF0aW9uKCk7XHJcbiAgICBpZiAoZHJhd1RpbWVvdXQpIGRyYXdQb2ludHMoc3RhdGUudGltZW91dEludGVydmFsUG9pbnRzLCBcInJlZFwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJhbmRvbUdlbmVyYXRpb24oKSB7XHJcbiAgICBjb25zdCBiYXNlbGluZSA9IHBhcnNlSW50KGJhc2VsaW5lSW5wdXQudmFsdWUpO1xyXG4gICAgY29uc3QgbWluUlRUID0gcGFyc2VJbnQobWluUlRUaW5wdXQudmFsdWUpO1xyXG4gICAgY29uc3QgbWF4UlRUID0gcGFyc2VJbnQobWF4UlRUaW5wdXQudmFsdWUpO1xyXG4gICAgY29uc3QgZGV2aWF0aW9uUGVyY2VudGFnZSA9IHBhcnNlSW50KGRldmlhdGlvbklucHV0LnZhbHVlKSAvIDEwMDtcclxuICAgIGNvbnN0IGJhc2VsaW5lQWRkTGltaXQgPSBtYXhSVFQgLSBiYXNlbGluZTtcclxuICAgIGNvbnN0IGJhc2VsaW5lU3ViTGltaXQgPSBiYXNlbGluZSAtIG1pblJUVDtcclxuXHJcbiAgICBjb25zdCBwb2ludENvdW50ID0gcGFyc2VJbnQocG9pbnRzSW5wdXQudmFsdWUpO1xyXG4gICAgc3RhdGUucnR0UG9pbnRzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50Q291bnQ7IGkrKykge1xyXG4gICAgICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgbGV0IHZhbHVlID0gYmFzZWxpbmU7XHJcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpID49IDAuNSkge1xyXG4gICAgICAgIC8vQWRkXHJcbiAgICAgICAgdmFsdWUgKz0gcGVyY2VudGFnZSAqIGJhc2VsaW5lQWRkTGltaXQgKiBkZXZpYXRpb25QZXJjZW50YWdlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vU3VidHJhY3RcclxuICAgICAgICB2YWx1ZSAtPSBwZXJjZW50YWdlICogYmFzZWxpbmVTdWJMaW1pdCAqIGRldmlhdGlvblBlcmNlbnRhZ2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXRlLnJ0dFBvaW50cy5wdXNoKHZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhbGNUaW1lb3V0SW50ZXJ2YWwoKTtcclxuICAgIGRyYXcoKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gY2FsY1RpbWVvdXRJbnRlcnZhbCgpIHtcclxuICAgIGNvbnN0IGFscGhhRVJUVCA9IHBhcnNlSW50KGFscGhhRVJUVElucHV0LnZhbHVlKSAvIDEwMDtcclxuICAgIGNvbnN0IGJldGFEZXZSVFQgPSBwYXJzZUludChiZXRhRGV2UlRUSW5wdXQudmFsdWUpIC8gMTAwO1xyXG4gICAgc3RhdGUuZXJ0dFBvaW50cyA9IFtdO1xyXG4gICAgc3RhdGUuZGV2UlRUUG9pbnRzID0gW107XHJcbiAgICBzdGF0ZS50aW1lb3V0SW50ZXJ2YWxQb2ludHMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUucnR0UG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChpIDw9IDApIHtcclxuICAgICAgICBzdGF0ZS5lcnR0UG9pbnRzLnB1c2goc3RhdGUucnR0UG9pbnRzW2ldKTtcclxuICAgICAgICBzdGF0ZS5kZXZSVFRQb2ludHMucHVzaChcclxuICAgICAgICAgIE1hdGguYWJzKHN0YXRlLnJ0dFBvaW50c1tpXSAtIHN0YXRlLmVydHRQb2ludHNbaV0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGF0ZS5lcnR0UG9pbnRzLnB1c2goXHJcbiAgICAgICAgICAoMSAtIGFscGhhRVJUVCkgKiBzdGF0ZS5lcnR0UG9pbnRzW2kgLSAxXSArXHJcbiAgICAgICAgICAgIGFscGhhRVJUVCAqIHN0YXRlLnJ0dFBvaW50c1tpXVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgc3RhdGUuZGV2UlRUUG9pbnRzLnB1c2goXHJcbiAgICAgICAgICAoMSAtIGJldGFEZXZSVFQpICogc3RhdGUuZGV2UlRUUG9pbnRzW2kgLSAxXSArXHJcbiAgICAgICAgICAgIGJldGFEZXZSVFQgKiBNYXRoLmFicyhzdGF0ZS5ydHRQb2ludHNbaV0gLSBzdGF0ZS5lcnR0UG9pbnRzW2ldKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgc3RhdGUudGltZW91dEludGVydmFsUG9pbnRzLnB1c2goXHJcbiAgICAgICAgc3RhdGUuZXJ0dFBvaW50c1tpXSArIDQgKiBzdGF0ZS5kZXZSVFRQb2ludHNbaV1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRlLmluaXRpYWxTdGF0ZSA9IGluaXRpYWxTdGF0ZTtcclxuICBzdGF0ZS5kcmF3ID0gZHJhdztcclxuICBzdGF0ZS5yYW5kb21HZW5lcmF0aW9uID0gcmFuZG9tR2VuZXJhdGlvbjtcclxuICBzdGF0ZS5jYWxjVGltZW91dEludGVydmFsID0gY2FsY1RpbWVvdXRJbnRlcnZhbDtcclxuICBzdGF0ZS5pbml0aWFsU3RhdGUoKTtcclxuICByZXR1cm4gc3RhdGU7XHJcbn1cclxuY29uc3QgcnR0RGlhZ3JhbSA9IGRpYWdyYW0oKTtcclxucnR0RGlhZ3JhbS5kcmF3KCk7XHJcblxyXG5yYW5kb21HZW5lcmF0aW9uQnV0dG9uLm9uY2xpY2sgPSBydHREaWFncmFtLnJhbmRvbUdlbmVyYXRpb247XHJcblxyXG5zaG93RVJUVENoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gIHJ0dERpYWdyYW0uZHJhdygpO1xyXG59O1xyXG5cclxuc2hvd0RldlJUVENoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gIHJ0dERpYWdyYW0uZHJhdygpO1xyXG59O1xyXG5cclxuc2hvd1RpbWVvdXRDaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICBydHREaWFncmFtLmRyYXcoKTtcclxufTtcclxuXHJcbm1pblJUVGlucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQobWluUlRUaW5wdXQudmFsdWUpO1xyXG4gIGlmICh2YWx1ZSA8IDApIHtcclxuICAgIG1pblJUVGlucHV0LnZhbHVlID0gXCIwXCI7XHJcbiAgfVxyXG4gIGNvbnN0IG1heFZhbHVlID0gcGFyc2VJbnQobWF4UlRUaW5wdXQudmFsdWUpO1xyXG4gIGlmICh2YWx1ZSA+IG1heFZhbHVlKSB7XHJcbiAgICBtaW5SVFRpbnB1dC52YWx1ZSA9IG1heFJUVGlucHV0LnZhbHVlO1xyXG4gIH1cclxuICBpZiAocGFyc2VJbnQoYmFzZWxpbmVJbnB1dC52YWx1ZSkgPCB2YWx1ZSkge1xyXG4gICAgYmFzZWxpbmVJbnB1dC52YWx1ZSA9IG1pblJUVGlucHV0LnZhbHVlO1xyXG4gIH1cclxufTtcclxubWF4UlRUaW5wdXQub25jaGFuZ2UgPSAoKSA9PiB7XHJcbiAgY29uc3QgdmFsdWUgPSBwYXJzZUludChtYXhSVFRpbnB1dC52YWx1ZSk7XHJcbiAgaWYgKHZhbHVlIDwgMCkge1xyXG4gICAgbWF4UlRUaW5wdXQudmFsdWUgPSBcIjBcIjtcclxuICB9XHJcbiAgY29uc3QgbWluVmFsdWUgPSBwYXJzZUludChtaW5SVFRpbnB1dC52YWx1ZSk7XHJcbiAgaWYgKHZhbHVlIDwgbWluVmFsdWUpIHtcclxuICAgIG1heFJUVGlucHV0LnZhbHVlID0gbWluUlRUaW5wdXQudmFsdWU7XHJcbiAgfVxyXG4gIGlmIChwYXJzZUludChiYXNlbGluZUlucHV0LnZhbHVlKSA+IHZhbHVlKSB7XHJcbiAgICBiYXNlbGluZUlucHV0LnZhbHVlID0gbWF4UlRUaW5wdXQudmFsdWU7XHJcbiAgfVxyXG59O1xyXG5iYXNlbGluZUlucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoYmFzZWxpbmVJbnB1dC52YWx1ZSk7XHJcbiAgaWYgKHZhbHVlIDwgcGFyc2VJbnQobWluUlRUaW5wdXQudmFsdWUpKSB7XHJcbiAgICBiYXNlbGluZUlucHV0LnZhbHVlID0gbWluUlRUaW5wdXQudmFsdWU7XHJcbiAgfVxyXG4gIGlmICh2YWx1ZSA+IHBhcnNlSW50KG1heFJUVGlucHV0LnZhbHVlKSkge1xyXG4gICAgYmFzZWxpbmVJbnB1dC52YWx1ZSA9IG1heFJUVGlucHV0LnZhbHVlO1xyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIHNldFJlbVJvb3RPblJlc2l6ZSgpIHtcclxuICBjb25zdCBwaXhlbEFtb3VudCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLyA2NTtcclxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBgJHtwaXhlbEFtb3VudH1weGA7XHJcbn1cclxuc2V0UmVtUm9vdE9uUmVzaXplKCk7XHJcbndpbmRvdy5vbnJlc2l6ZSA9IHNldFJlbVJvb3RPblJlc2l6ZTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9